Index: /trunk/Source/JavaScriptCore/PlatformGTK.cmake
===================================================================
--- /Source/JavaScriptCore/PlatformGTK.cmake	(revision 226944)
+++ /Source/JavaScriptCore/PlatformGTK.cmake	(revision 226945)
@@ -1,2 +1,4 @@
+set(JavaScriptCore_OUTPUT_NAME javascriptcoregtk-${WEBKITGTK_API_VERSION})
+
 list(APPEND JavaScriptCore_UNIFIED_SOURCE_LIST_FILES
     "SourcesGTK.txt"
@@ -51,22 +53,2 @@
     ${GLIB_INCLUDE_DIRS}
 )
-
-# Linking WebKit properly is extremely tricky. We need to build both a static library
-# and a shared library for JSC. See https://bugs.webkit.org/show_bug.cgi?id=179914.
-set(JavaScriptCoreGTK_LIBRARIES
-    JavaScriptCore${DEBUG_SUFFIX}
-)
-ADD_WHOLE_ARCHIVE_TO_LIBRARIES(JavaScriptCoreGTK_LIBRARIES)
-
-add_library(JavaScriptCoreGTK SHARED "${CMAKE_BINARY_DIR}/cmakeconfig.h")
-target_link_libraries(JavaScriptCoreGTK ${JavaScriptCoreGTK_LIBRARIES})
-set_target_properties(JavaScriptCoreGTK PROPERTIES OUTPUT_NAME javascriptcoregtk-${WEBKITGTK_API_VERSION})
-
-WEBKIT_POPULATE_LIBRARY_VERSION(JAVASCRIPTCORE)
-set_target_properties(JavaScriptCoreGTK PROPERTIES VERSION ${JAVASCRIPTCORE_VERSION} SOVERSION ${JAVASCRIPTCORE_VERSION_MAJOR})
-
-if (NOT DEVELOPER_MODE AND NOT CMAKE_SYSTEM_NAME MATCHES "Darwin")
-    WEBKIT_ADD_TARGET_PROPERTIES(JavaScriptCoreGTK LINK_FLAGS "-Wl,--version-script,${CMAKE_CURRENT_SOURCE_DIR}/javascriptcoregtk-symbols.map")
-endif ()
-
-install(TARGETS JavaScriptCoreGTK DESTINATION "${LIB_INSTALL_DIR}")
Index: unk/Source/JavaScriptCore/javascriptcoregtk-symbols.map
===================================================================
--- /Source/JavaScriptCore/javascriptcoregtk-symbols.map	(revision 226944)
+++ 	(revision )
@@ -1,6 +1,0 @@
-{
-global:
-  JS*;
-local:
-  *;
-};
Index: /trunk/Source/cmake/OptionsGTK.cmake
===================================================================
--- /Source/cmake/OptionsGTK.cmake	(revision 226944)
+++ /Source/cmake/OptionsGTK.cmake	(revision 226945)
@@ -377,4 +377,5 @@
 set(WebKit2WebExtension_PKGCONFIG_FILE ${CMAKE_BINARY_DIR}/Source/WebKit/webkit2gtk-web-extension-${WEBKITGTK_API_VERSION}.pc)
 
+set(JavaScriptCore_LIBRARY_TYPE SHARED)
 set(SHOULD_INSTALL_JS_SHELL ON)
 
Index: /trunk/Source/cmake/WebKitCompilerFlags.cmake
===================================================================
--- /Source/cmake/WebKitCompilerFlags.cmake	(revision 226944)
+++ /Source/cmake/WebKitCompilerFlags.cmake	(revision 226945)
@@ -105,11 +105,4 @@
         WEBKIT_APPEND_GLOBAL_CXX_FLAGS(-std=c++14
                                        -fno-rtti)
-
-        if (UNIX AND NOT DEVELOPER_MODE)
-            # These are used even for ports that use symbol maps so that the
-            # compiler can take visibility into account for code optimization.
-            WEBKIT_APPEND_GLOBAL_COMPILER_FLAGS(-fvisibility=hidden)
-            WEBKIT_APPEND_GLOBAL_CXX_FLAGS(-fvisibility-inlines-hidden)
-        endif ()
 
         if (WIN32)
